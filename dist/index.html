<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style1.css">
    <title>ðŸ˜Ž Xmeme</title>
</head>
<body class = "bg-indigo-200"> 
    <div class="container">
        <button class="bg-blue-400 text-white font-bold my-2 py-2 px-5 rounded-lg hover:bg-blue-500 shadow-xl">
            <a href="mailto:iassarraf@gmail.com">Contact Me</a>
        </button>
        <!-- <button class="bg-blue-400 text-white font-bold my-2 py-2 px-5 rounded-lg hover:bg-blue-500 shadow-xl">Contact Me</button> -->
    </div>
    <!-- <hr class="pt-1"> -->

    <!-- Card Component -->
    <div class="max-w-sm mx-auto my-10 flex p-6 bg-white rounded-lg shadow-xl">
        <div class="flex-shrink-0">
            <img src="download.png" alt="" class="h-12 w-12 rounded-full">
        </div>
        <div class="ml-5 pt-0.25">
            <h4 class="text-xl text-grey-900">XMeme</h4>
            <p class="text-base text-green-600">By Piyush Sarraf</p>
        </div>
    </div>

    <form class="px-12 space-y-6"  action="/memes" method="POST">
        <div>
            <input class="border border-black" type="text" name="name" placeholder="Enter Name" required>
        </div>
        <input class="border border-black " size="50" type="url" name="url" placeholder="Enter Url" required>
        <input class="border border-black mx-2" type="text" name="caption" placeholder="Enter caption" required>
        <button class="bg-red-400 text-white font-bold mx-2 my-2 py-1 px-5 rounded-lg hover:bg-red-500 shadow-xl" type="submit">Submit</button>
    </form>

    <div id = "myData" class=""></div>

    
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let url = 'http://localhost:5000/memes';
            fetch(url)
            .then(data => data.json())
            .then(res => {
                //console.log(res);
                const html = res.map(user => {
                    return `
                    <div class="user" style="width: 18rem;">
                        <img style="border-radius: 10px;"class="avatar" src=${user.url} onerror=this.src="https://i.kym-cdn.com/photos/images/newsfeed/001/306/614/ab0.png">
                        <div class="card-body">
                            <b> Author : ${user.name} </b>
                            <p> Caption : ${user.caption} </p>
                        </div>
                        
                    </div>
                    `;
                }).join("");
                //console.log(html);
                document
                    .querySelector('#myData')
                    .insertAdjacentHTML("afterbegin", html);

            })
            .catch(err => console.log(err))
            
            // function appendData(data) {
            //     var mainContainer = document.getElementById("myData");
            //     for (var i = 0; i < data.length; i++) {
            //         var div = document.createElement("div");
            //         div.innerHTML = 'Name: ' + data[i].name + ' url : ' + data[i].url + ' description : ' + data[i].caption;
            //         mainContainer.appendChild(div);
            //     }
            // }
        });
    </script>

</body>

</html>